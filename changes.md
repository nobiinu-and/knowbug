## 更新予定
#### 予定なし
* ログなどのフォントの設定ファイルでの指定

#### 検討中
* 変数やログの文字列の縦断検索
* 変数の値の書き換え
* 変数の制約条件の常時チェック
* 関数の事前・事後条件
* ログの出力レベルの設定
  * モジュールを使えば問題ない気がする。
* 新しいログの追加をモードレスなポップアップで通知する。

#### 作業予定
* #modinit, #modterm の発生、終了をスクリプト側から指定する方法を提供する。
* 与えられた項目を一覧表示する概観ノードの追加
* SysvarとしてGinfo,dirinfo,mouse(x,y,w)の追加
* hsphedの情報をvartreeに配置。
* エディットボックスを更新するときに途中で再描画されないようにしたい。

## 履歴
#### 2015/09/21
* 「栞」メニューを追加し、「+log」「+script」ノードに移動できるようにした。
  * ジャンプ先を設定ファイルなどで指定できるようにするべき。

#### 2015/08/23
* タイトルバーにバージョン番号を表示するようにした。
* ヘルプメニューを削除した。
 * 「バージョン情報」は、タイトルバーと重複するだけになったので削除。
 * 「Knowbug開発リポジトリを開く」は「メニュー」に移動。
* バージョン番号を betaNN から v1.NN に変更した。
* リリース (ver: 1.20)

#### 2015/07/20
* 特定の名前で始まるモジュールを変数ツリーに表示しないようにした。
  * 設定ファイルのオプション。既定値は `@__`。
* ビューウィンドウのハンドルを返す API、`knowbug_hwnd_view()` を追加した。
  * これに伴い、`knowbug_hwnd` → `knowbug_hwnd_main()` に変更した。
* 改行を含む文字列を、特殊な形式で表示するようにした。
  * `name: \n` の後で表示する。

#### 2015/07/07
* x64ランタイム(hsp3_64.exe)をサポート。
  * hsp3debug_64.dll という名前になる。
  * 公式がまだベータ版(HSP3.5β2)なので、追加の対処が必要かもしれない。

#### 2015/07/04
* knowbugVsw を使用するための writer オブジェクトをHSP側から操作するためのAPIを追加した。
* knowbug_writeVarinfoString API が refstr ではなく静的変数に文字列を返すようにした。

#### 2015/07/03
* コードの整理。
* 返値ノードを呼び出しノードと取り違えることがあるバグを修正した。
  * 症例: +dynamic 直下が1つの返値ノードであるとき、LParam (= 0) を stkCallInfo の添字とみなしてしまい、呼び出しが実行中でないのに stkCallInfo[0] にアクセスしようとして落ちる。
* 返値ノードで、関数が呼び出された位置も表示するようにした。
  * 呼び出しノードのデータ(ModcmdCallInfo)を所有するようにした。
  * prmstack を取り出すタイミングがつかみづらいので、実引数は表示できない。

#### 2015/06/27
* サンプルの整理。
* スクリーンショットを撮り直した。
* リリース (ver: 1.0β19)

#### 2015/06/12
* WrapCall で検知できないユーザ定義コマンド呼び出し (unhookable invocation: modinit, modterm, deffunc onexit) に関するメモリアクセス違反を解消した。
  * 原因: unhookable invocation (A)の実行中には、その直前の呼び出し(B)の prmstkを取得できない。そのため(B)の prmstk を取得しようとして(A)の prmstk を取得してしまっていた。
    * prmstkの内部にアクセスするだけなら問題ないが、その中に書かれているポインタ(実際は不正な値)にアクセスしようとすると、ほぼ確実に落ちる。
  * 対策: ユーザ定義コマンドの本体から他のサブルーチン呼び出しが実行中のときは、それがただの gosub だった場合にも、prmstk を危険なものとみなしてポインタ脱参照をしない。
    * int, double, label は表示する。他はアクセス違反を起こしうるので ``prm: (unsafe)`` と表示する。
* ログノードを自動的に末尾にスクロールする設定を追加した。
  * 更新時に最後尾をみていれば自動スクロール設定がつき、最後尾以外をみていたら自動スクロール設定が外れる、という挙動にしたかったが、やり方が分からない。
* 「実行中のスクリプトを開く」メニューを追加した。
* ビューウィンドウの初期サイズを ini ファイルで指定できるようにした。

#### 2015/06/11
* 変数ツリーの各ノードに対して、ビューのスクロール量を記録するようにした。
* 「+script」ノードは更新するたびに実行位置を選択するようにした。
  * ViewEdit の選択範囲が非フォーカス時もハイライトされるようになった。(ES_NOHIDESEL)
  * 字下げを除去しないことにした。
* 一回の停止の間には、ノードの文字列をキャッシュしておくようにした。

#### 2015/06/10
* 「+sysvar」ノードを既定で閉じているようにした。
* 「+general」ノードを追加した。全般タブと同じ内容が表示される。システム変数は除く。
* GUIを大幅に変更。基本的に ddwTree リスペクト。
  * タブコントロールを削除し、変数ツリー画面だけにした。
  * ログやスクリプトは変数ツリーの1つという位置づけにした。全般タブの末路と同じ。
  * 変数情報やログは別ウィンドウとし、サイズ可変にした。

#### 2015/06/05
* readme を GitHub Flavored Markdown 形式に変換した。
  * README.md と changes.md に分割した。
* ログを消去する前に警告するようにした。(opt-out)
* 起動時に選択するタブをオプションで選べるようにした。
* 起動時のタブをオプションで選べるようにした。
* 変数ツリーをグローバルノード「@」を選択した状態で初期化するようにした。
* ポップアップメニューに「設定ファイル」を追加した。
* ツリービューの lparam の操作にメタ関数を使うことで型安全にしたが、やや回りくどい。
  * LPARAM との間の相互変換を行う構造体 struct { ctor(LPARAM); operator LPARAM(); } を6つ用意するのも試したがどう考えてもめんどくさかったのでやめた。
  * ResultNodeData がやっているように HTREEITEM → データ という対応を保存しておくのもありだがめんどくさい。
* リリース (ver: 1.0β18)

#### 2015/06/04
* CVarTree を素朴な実装に変更。
* ツリー状文字列の長さとネストの深さを制限するオプションを追加した。

#### 2015/05/29
* 変数のアドレス、バッファサイズ、メモリを表示しないオプションを追加した。
  * デフォルトでは表示するようになっている。
* システム変数の型をテキスト内で表示しないようにした。

#### 2014/09/23
* git を導入した。GitHub で公開するようにした。
  * hsp のソースファイルを除いて、テキストファイルは UTF8 に変更。
* hpimod::VtTraits を導入した。
  * 重複の削減としょうもないミスの予防。

#### 2014/09/07
* CIni に enumSection, enumKeys を追加した。
* 変数ツリービューをカスタムドローする際に、システム変数を型に応じて色分けするようにし、呼び出しノードを命令か関数かで色分けできるようにした。
  * また、選択状態のノードは色分けしないようにした。(見づらくなるので)
* EditControl の更新時に、スクロールバーの行の位置を保存するようにした。
  * 変数の内容が大幅に変更された場合などはうっとうしいかもしれないが。
* 拡張型の変数や値を、外部Dllが作れるようにした。その型のHPI自身でなくてもいい。
  * そのためにいくつかの関数を公開している。(ExVardataString.(h/cpp))
* 拙作プラグイン assoc, vector, (array), modcmd の拡張表示をメインの部分から取り除き、前述の外部 Dll の呼び出しの部分に knowbug (hsp3debug.dll) が持つ関数ポインタを使うことで対応するようにした。
  * assoc, vector はデータを整形して knowbug に送信するという手間をしなくてよくなったが、後方互換性のためにとりあえず残しておく。
* notebuf に静的変数が指定されていたなら、名前を表示するようにした。
* リリース (ver: 1.0β17)。
 * 要約：
   * スクリプト向けAPIの追加 (2つ)
   * カスタムドローの自由度の増加
   * プラグイン拡張型の文字列表示を外部化
   * いくつかのバグ修正、および機能していない機能の削除

#### 2014/09/06
* WrapCall：typeinfo の配列が sbExpand されて移動することに今更気づく。
  * つまり TYPE_MODCMD の typeinfo にアクセスできるのは、WrapCall プラグインが初期化されたときに限られ、かつ、終了時に cmdfunc, reffunc を restore することができない。
* 再リリース (ver: 1.0β16)。
* 非依存な返値ノードが追加されていなかったバグを修正した。
	直前の呼び出しに必ず依存していることになってしまっていた。
* 返値ノードデータの管理を分かりやすくした。
* CVarinfoTree, CVarinfoLine を合わせて、CVardataString にした。
  * 妙な分岐がたくさん残っている。
  * いわゆる Template Method Pattern。仮想関数による多態を使うのでオーバーヘッドがある。
  * 文字列バッファ(string)と文字列バッファへの書き込みを行う関数群を持つクラス(CStrWriter)を分離することで、他の Writer の利用をしやすくした。
* そのバッファの委譲により、概観(Overview)系を CVarinfoText に移しやすくなった。
  * ただし項目ごとに new CLineformedWriter しているので未だ厳しい。
* 変数情報の文字列の長さ制限を設定できないようになった。
  * 上の更新の弊害。対応できるとは思う。
  * (2015/06/04) 対応
* 変数データの文字列のネストレベルが一定量(64)を超えたら、それより深い入れ子データを無視するようにした。
  * 無限ループ対策。
* EditControl の「右端で折り返す」設定が機能していないことに気づいたので、設定項目から取り除いた。
  * そのスタイルはコントロールの作成時にしか効果がないらしい。つまりソース側からコントロールを生成するようにすれば問題ない……が、フォントを作るのがめんどくさすぎて諦めた。

#### 2014/09/05
* システム変数のダンプ情報をなぜか CVarinfoTree::addSysvar が生成していたので、別の関数に分けた。
* ツリー状文字列の生成において、「名前」を引数で持ち運ぶようにした。
* スクリプト向けのAPI knowbug_getVarinfoString, knowbug_getCurrentModcmdName を追加した。

#### 2014/09/02
* g_stkCallInfo に ModcmdCallInfo の実体を保持させるのをやめて、それぞれの実体を所有するスマポの配列にした。
  * std::make_unique では struct をメンバ列 {...} で初期化できないのね。
* g_stkCallInfo を非公開にし、at と range のみ公開した。必要なら他のも公開するが。
* スクリプトエディタから編集中かつ未保存のファイルを実行するとき、ソース小窓に表示する文字列を取得しようとして存在しない行番号を参照し、アクセス違反エラーを生じていたバグを修正した。

#### 2014.08/29
* リリース (ver: 1.0β16)
  * 要約：ソースコードを整理しただけ。

#### 2014.08/26
* vartree の中で文字列生成をしている部分を CVarinfoTree/Line に入れた。
  * システム変数一覧やモジュールの一覧などの **Overview 系。
  * WrapCall との結合度が上がった。
* ツリー状文字列および一行文字列において、モジュール実体がクローンであることの表示方法を変更した。
  * 旧：「.clone」と表示していた。一行文字列では特になし。
  * 新：モジュールクラス名の後ろに & を付けるようにした。
* 要素数 0 の配列変数を特別扱いしないようにした。
* 一行文字列で、モジュール実体のメンバは ( ) ではなく { } で括るようにした。
  * assoc のメンバを { } ではなく [ ] で括るようにした。
  * また、括弧の内側に空白を入れないようにした。
* 仮引数を表す文字列を map と join で作るようにした。また無意味な。

#### 2014.08/22
* ResultNodeData を VarTree 側が管理するようにした。
* (モジュールノードなどで見られる)一行表示において、すべての文字がエスケープされて長さが2倍になるような文字列を表示するときに、バッファオーバーフローが起きていたバグを修正した。
  * 例: `"""`
* 変数情報のモードの表示方法を変更した。
  * 旧：「モード：無効/実体/クローン/その他」
  * 新：「変数型：``type<tq> (...)``」
    * `<tq>` は、モードが実体なら空、無効なら「!」、クローンなら「&」、その他なら `<err>`。
* ツリー状文字列で、配列の型(.type)も上と同様にしてモードを表示するようにした。
	関数を共有したかっただけ。
* getDbgString が2か所、getMPTypeString が3か所にあったのをまとめた。
	getMPTypeString が1か所でしか使われていないのには驚いた。
* 静的変数ツリー CVarTree の実装をリファクタリングした。
	モジュール名は常に先頭に @ を冠することにして分かりやすく、かつソートがうまくいくようにした。
	なぜか自作反復子を実装し使っていたバグを修正した。
* 変数ツリービューにおいて、モジュール・ノードの詳細を文字列表示するために、
	その直下のモジュールと変数を列挙するために、
	変数ツリービューではなく、CVarTree から子リストを得るようにした。
* システム変数 iparam, wparam, lparam を3つ組扱いしていたのをやめた。
* システム変数の順番で、notebuf を末尾にした。
* モジュールノード、+sysvar、+dynamic の一行表示の文字列を
	vartree ではなく、CVarinfoLine が作るようにした。

#### 2014.08/21
* VarinfoTree/VarinfoLine が CStrBuf を使うようにした。
* 呼び出しノードの LPARAM を ModcmdCallInfo* ではなく、それの g_stkCallInfo における添字にした。
  * おそらく、vector の実体が移動してしまうことによってリンク切れが起きる可能性があった。
* ツリー状文字列で、配列の型の表示方法を、変数情報の場合と同じにした。
```
	旧表示 (一次元配列)：
		.vartype = 変数型
		.length  = 要素数
	旧表示 (多次元配列)：
		.vartype = 変数型
		.format  = (要素数1, 要素数2, ...) (全要素数 in total)
	新表示：
		.type = 変数型 (要素数1, ...) (全要素数 in total)
```

#### 2014.08/20
* HSP3EXINFO::er を使用しないようにした。
  * HSP2.x 系のプラグインがかつて使用していたメンバなので、障害を起こしていた。
* 再リリース。
* WrapCall を統合した。
* 返値ノードの値を取得するために黒魔術ではなく正規の方法を取るようにした。
  * WrapCall 自体が黒魔術なのであまり意味ないかもしれない。

#### 2014.04/27
* 開発環境を VC++ 2013 Express SP1 にアップデートした。
* HSP3.4β4 から、ラベル名と引数名がデバッグ情報として与えられるようになったことを受けて更新。
  * 引数やメンバ変数の項を、可能なら名前を表示するようにした。
  * ラベルの値として、可能ならラベル名を表示するようにした。
    * 同じ位置を指す異なる複数の名前のラベルが登録されている場合、その1つ目を表示する。
  * 未確認だが、HSPのバージョンが古くてもいちおう動くはず。
* 一応、配列の4次元目まで表示できるようにした。
* 変数型の表示で、存在しない次元は 0 ではなく省略して表示するようにした。
	つまり2次元配列は int (a, b, 0) だったのが int (a, b) になった。
* リリース (ver:1.0β15)。

#### 2014.02/16
* var_modcmd.hpi と連携した。
  * modcmd_k 型の値は、それが指示しているコマンドの名前を表示する。
* var_modcmd.hpi と同時リリース (ver: 1.0β14)。

#### 2014.02/14
* modptr.as と連携した。
  * modptr 値を表示する代わりに、それが指示しているインスタンスの情報を表示する。
  * modptr.as の仕様により、死んだポインタでも問題なく表示できる (はず)。
* modptr.as と同時リリース (ver: 1.0β13)

#### 2012.12/02
* EXPORTした関数を呼び出される形でスクリプトと連携するようにした。
* main.cpp が非常に肥えたので、main, vartree, dialog の3つに分解した。

#### 2012.12/01
* スクリプトタブとスクリプト小窓(実行中の行を表示)を両方使用するようにした。
  * 後者は「全般」タブに入る。

#### 2012.11/30
* ある特定の変数が静的変数として存在していた場合、knowbug の開始時に、それに knowbug のウィンドウハンドルを格納するようにした。
  * これにより連繋が取れるようになった。
* ↑をもとに、knowbug と連携するための knowbug モジュールを作った。
	構造体パラメータに識別子を与える機能を実装した。
  * ついでに、メンバ命令・関数の第一引数を thismod と表示されるようにした。
* 実行位置情報から、ファイルを読み込んで実行している行を表示するようにした。
  * 小窓を作って一行だけ表示するか、タブを1つ追加してスクリプト全文を表示するべきか。
  * オプションで選べたらいいんじゃね？

#### 2012.11/29
* 呼び出し関連のツリービューノードを実行中に追加したり除去したりしない、という条件を間違えていたバグを修正した。
  * 「「次飛」「脱出」はステップ実行として扱わない。」というのを忘れていた。
* 最新の呼び出しが生じた場所より現在の sublev が2以上深い場合、つまり、それの実行後に他のサブルーチン呼び出しが起こっている場合には、ctx->prmstack を参照しないようにした。
  * gosub ならいいが、他の呼び出しによって prmstack が置き換えられていたら不正なメモリアクセスになりかねないため。
  * 例えば ctor/dtor/onexit の呼び出しは捕捉できないので要注意である。
* 呼び出しノードで、呼び出された位置(ファイル名、行番号)を表示するようにした。

#### 2012.09/13
* リリース (ver: 1.0β12)

#### 2012.09/12
* 返値ノードの機能を使うか否かを設定できるようにした。
* runmode でステップ実行中か否かを判断することができないことが判明した。
  * どちらにせよ OnBgnCalling, OnEndCalling を通るときの runmode は (RUNMODE_RUN | RUNMODE_RETURN) である。
  * なので、ステップ実行中か否かを示すグローバル変数 stt_bStepRunning を用いるようにした。
  * ステップ実行中でなければ、呼び出しノードを変更しない、という仕様に使う。
    * そのため、「次飛」「脱出」はステップ実行として扱わない。
* 返値ノードを呼び出しノードの下に追加するに際し、その呼び出しがそれに引数として依存していない場合、その下にあるすべての返値ノードを削除してから追加するようにした。
  * 大量に溜まってしまうので。
  * 上のバグに気づいていなかったので戸惑った。
  * 呼び出し終了後に追加しようとすると、依存していないと判定されるため。

#### 2012.09/11
* ツリー上の呼び出しノードに対して「脱出」操作をできるようにした。
  * 似たようなものなので「次飛」は実装していない。
* 終了時に、呼び出しノードを選択していると正常に終了できないバグを修正した。
  * 終了時に呼び出しノードを削除しないようにした。
    * 削除する必要はなかったので。
  * 「選択している呼び出しノードを削除する場合、その上を選択する」仕様に関連しているようだが、しかしなぜ正常に終了できないのかは不明。

#### 2012.09/10

* ユーザ定義関数の引数の中でユーザ定義関数が呼び出されていたときに、前者の引数が展開され終わる前に前者の prmstack (存在しない) にアクセスしようとして、間違った prmstack を参照していたバグを修正した。
* WrapCall:
  * ModcmdCallInfo を双方向リストにした。
    * 元々 ModcmdCallInfo の作成・破棄は WrapCall の担当なので、prev, next も WrapCall 側で設定される。
  * 返値が返却されたときに通知 ResultReturning を送るようにした。
    * その呼び出しの OnEndCalling 通知の直前に送られる。
  * 終了時に、ModcmdCallInfo をすべて破棄するようにした。
    * 途中で終了したとき、それらを delete することなく終了していた可能性。たまに死亡していたのはこのせい？
* ユーザ定義コマンドが返値を返したときに、返値ノードを生み出すことにした。
  * 通常、直前の呼び出しの子ノードとして追加される。
    * その親の呼び出しが終了した時に削除される。
  * 最初の呼び出しの返値は、+dynamic の直下に置かれる。
    * これは、その次に生じた呼び出しが返値を返したときに削除される。
* 終了時に、すべての返値ノードを削除するようにした。
  * 関連している ResultNodeData を破棄するため。
* OnResultReturning ではなく、OnEndCalling に処理するようにした。
  * ノードを削除した後に返値ノードを生成する。
  * 実行モード RUN | RETURN の場合は即座に追加し、そうでなければ溜める。
    * この場合、関数だけでなく、命令が返値を返却した場合も処理される。
* 呼び出し開始または終了時(OnBgnCalling, OnEndCalling)に、実行モードが RUNMODE_RETURN である可能性を見落としていたバグを修正した。
  * 終了時に RUNMODE_RUN であることはなさそう。

#### 2012.09/09
* ログの最大文字量を設定できるようにした。
  * エディットコントロール本来の既定値は 0x8000 、設定の既定値は 0x20000 。
* エディットコントロールを右端で折り返すか否かを設定で変更できるようにした。
* array 引数の文字列化に失敗していたバグを修正した。
* リリース (ver: 1.0β11)

#### 2012.09/08
* 破棄されたかもしれない一時オブジェクトを参照していたバグを修正した。

#### 2012.09/07
* ログに「更新」「保存」「初期化」機能を追加した。
* 変数情報をログに書き込めるようにした。
* ファイルパスを設定すると、終了時に自動的にログを保存するようにした。
* 値や変数を一行に文字列化する CVarinfoLine を実装した。
  * CVarinfoTree を“元にしている”。
  * 悪魔と契約した。
* 変数ツリーの、モジュールや +dynamic, +sysvar での簡易表示に対応した。
  * 各子ノードの値を一行に文字列化して表示する。
* var 引数を array 引数として処理していたバグを修正した。
  * 追記(09/09)：修正が中途半端だったのを再修生した。

#### 2012.08/10
* 開発環境、動作環境を Windows 7 に変更した。
  * XP に限り、重篤なバグがある場合は対応するかもしれない。
* 拡張プラグインによって提供されうる基本型の表示に対応した。
  * C++に存在する型をベースにしていると予想して処理する。
```
	bool,
	 char  = signed_char, 
	uchar  = unsigned_char,
	 short = signed_short,
	ushort = unsigned_short,
	uint   = unsigned_int,
```
#### 2012.05/27
* WrapCall:
	ユーザ定義命令の返値(RUNMODE)を、knowbug が返却したものにするようにした (ただし未使用)。
* 「実行」ボタンの幅を小さく(他のボタンと同じに)した。
  * 何故2倍の大きさを持っていたのか分からない。
* 「次飛」「脱出」ボタンを追加した。
  * 特定の sublev に達するまで「次行」(HSPDEBUG_STEPIN)の処理を繰り返すことで実装した。
  * この2つは、その sublev の値の違いしかない (脱出は現在値 ctx->sublev の1つ上に設定される)。
  * これらを押した後、マウスを動かすなどしてデバッグウィンドウにメッセージを送らないと、実行位置の表示が更新されないバグが残っている。原因が分からないが、致命的ではないのでとりあえず放置した。
* リリース (ver: 1.0β8)。
  * バージョン番号情報を書き換え忘れた。

#### 2012.01/22
* ini の論理値に文字列 "true", "false" を指定できるようにした。
  * 大文字・小文字を問わない
  * 従来通り 0, 非0 でもよい。
* ポップアップメニューを表示するようにした。
* 最前面ウィンドウに設定できるようにした。
  * ini の [Window] bTopMost を true にすると既定となる。

#### 2011.11/16
* 呼び出しノードを削除するとき、それが選択状態なら、その兄(いなければ親、すなわち"+dynamic")を選択するようにした。
* 呼び出しノードは、実行中はツリーノードを追加せずに、assert で停止したときにまとめて追加するようにした。
  * 削除は行う。
  * wait による停止でも追加してしまうという問題がある。
	
#### 2011.09/20
* 1024バイト以上の文字列を logmes するとバッファーオーバーフローで落ちるバグを修正した。

#### 2011.08/21 (Sun)
* モジュールメンバ関数の第一引数が、与えられた変数の要素 [0] を表示していたバグを修正した。

#### 2011.07.28 (Thu)
* multi → assoc に修正した。
* 再リリース (ver: 1.0β7)

#### 2011.07.21 (Thu)
* WrapCall の仕様変更に対応した。
  * ユーザ定義コマンドの呼び出し開始・終了を、ウィンドウメッセージではなく関数ポインタの呼び出しで通知するようになった。
* リリース (ver: 1.0β7)

#### 2011.07.18 (Mon)
* var_vector.hpi の拡張表示に対応した。

#### 2011.06.23 (Thu)
* 仮想システム変数 notebuf を追加した。notepad 命令群に設定されたバッファを表示する。
* システム変数の値を表す文字列を CVarinfoTree で作成するようにした。

#### 2011.06/22 (Wed)
* 変数情報部分の書式を変更した ([画像](http://twitpic.com/5f3ye7))。
* 変数データやログの、タブ文字幅を指定できるようにした。
  * [Interface] tabwidth = 4 (default)
* 変数データ文字列の字下げ(indent)を4スペース ``    `` ではなくタブ `\t` でするようにした。
* システム変数 iparam, wparam, lparam を params として1つのページで表示するようにした。

#### 2011.06/21 (Tue)
* var_multi.hpi の拡張表示に対応した。
* 静的でない変数が、要素数1でも単体変数(Scalar)ではなく、配列(Vector)として扱われていた不具合を修正した。

#### 2011 06/13 (Mon)
* 呼び出し終了時に削除するツリーノードが、最後のではなく2番目のノードになっていたバグを修正した。
  * for 文で TreeView_GetNextSibling() を複数回使おうとしたが、実際は初期化にしか書いていなかったという酷いミス。
* 再リリース (ver: 1.0β5)

#### 2011 03/29 (Tue)
* WrapCall.hpi との連携に対応。
  * +Dynamic ノードで、呼び出されたユーザ定義命令・関数の引数の値を表示できるようにした。
  * 呼び出し履歴を logmes 出来るようにした。
* リリース (ver: 1.0β5)

#### 2010 02/07 (Sun), 〃/08 (Mon)
* Visitor パターンを利用した方法に変更しようとしたが、無理だった。
  * 残骸 → new_knowbug フォルダ

#### 2010 02/06 (Sat)
* `@a@s` と `@b@s`など、領域内に領域があるとき、それらの関係を逆に解釈してしまうバグを修正した。
```
		-@
			-@a
				-@s
			-@b
				-@s
正しくは：
		-@				// @
			-@s			// @s
				-@a		// @a@s
				-@b		// @b@s
```
#### 2010 01/13 (Wed)
* カスタムドローするかどうかを、ini ファイルで設定できるようにした。
  * [ColorType]::bCustomDraw キーが真ならカスタムドローする。
* 全般タブのリストに要素を追加するコードを、若干すっきりさせた。
* 配列の aptr が 0x8000 以上のとき、符号が負に変わって、メモリ違反を起こし、異常終了してしまうバグを、hsp モードでのみ修正した。
  * PVal::offset が signed short 扱いになっていたため。
* hsp モードでは、ちゃんと、 hsp 本来のヘッダを用いるようにした。
  * ただし、clhsp での定義が複数の場所に散らばってしまう。
  * 配列の四次元目を表示できるようになったが、需要がなさそうなので変更なし。
* hsp モードで、thismod を、引数に指定された要素だけ表示するようにした。
* リリース (ver: 1.0β4)

#### 2010 01/11 (Mon)
* 再コンパイル。

#### 2010 01/02 (Sat)
* システム変数 err を表示するようにした。
* Vector要素 VecElem を表示する際に、実体要素なら `*`、参照要素なら `&` を、要素名 (通常は [n]) の後に付けるようにした。
* VecElemが参照要素で、aptr != 0 のとき、その要素の値のみを varScalar として取り出すようにした。

#### 2009 12/19 (Sat)
* Vectorの仕様変更に対応し、再ビルドした。
* 変数データツリーが300以上の深さになると、エラーで再帰を終了するようにした。
* 変数データツリーが長すぎると ( 0x5000 bytes 以上 )、途中で切るようにした。

#### 2009 12/18 (Fri)
* iniファイルを、ランタイムと同じフォルダから探すようにした。
  * スクリプトエディタがカレントディレクトリを変更してしまうため、カレントから探すと発見できない可能性が高い。
* カスタムドローで、NM_PREPAINT などの戻り値を、SetWindowLong() を用いて返すようにした。
  * return では返すことができないため、NM_PREPAINT が発生しなかった。
* 変数ツリーで、型ごとに色を変えるようにした。
* (ver: 1.0β3)

#### 2009 12/17 (Thu)
* ツリービューをカスタムドローするようにしようとした。
* iniファイルからの読み込みができるようにした。

#### 2009 12/16 (Wed)
* cntを表示するに際し、配列のように、トップレベルではないループの cnt 値も
	表示するようにした。
	「#n」は looplev が n である位置の cnt を表す。最上段がトップ。
* 「マルチスレッド Dll (/MD)」から「マルチスレッド (/MT)」に変更した。
  * Windows XP sp2 以前の環境でも動くようになった。
* リリース (ver: 1.0β2)

#### 2009 12/15 (Tue)
* Kernel32.dll に EncodePointer() がない環境でエラーが起きるVS2010のバグに
	対応するため、ビルドは VC++2008Ex で行うようにした。
* リリース (ver: 1.0β1)
* バッファサイズは、メモリダンプ時に表示するようにした。
* システム変数を、ツリーの「$sysvar」ノードに持たせるように、追加した。
* ツリーのトップレベルのノードはすべて開いた状態にするようにした。

#### 2009 12/14 (Mon)
* log-Editboxが更新されても、選択状態を維持するようにした。
* log-Editboxの自動更新を止めるために、自動更新の有無をチェックボックスで
	管理し、自動更新が無効化された状態で TabLogAdd された文字列は、一旦、
	別のバッファに書きためるようにした。
* hsp互換モードでは、配列の添字括弧に [] ではなく () を用いるようにした。
* 初リリース (ver: 1.0β0)
  * HSPTV! 掲示板で宣伝した: <http://hsp.tv/play/pforum.php?mode=pastwch&num=29264>。

#### 2009 12/13 (Sun)
* Compile-Switchで、hsp向けのバージョンとして作成できるようにした。
  * clhsp 限定の機能は、clhsp マクロがないと制御される。
* 多次元配列の全要素が表示できるようにした。ただし、諸事情により3次元に限る。
* nullmod を表示するときに、NULL参照エラーが発生していたバグを修正した。
* hsp互換モードで、struct型の内容 (FlexValue) を拡張表示するようにした。
* バージョン情報を埋め込むようにした。
* delmod された後の FlexValue の ptr が NULL になっていない可能性があるのを考慮して、type が FLEXVAL_TYPE_NONE でないことも条件にした。
  * 無効ポインタの参照でエラーが起きていた。
* 変数データテキストが 0x2000 バイトより大きければ、malloc で必要なだけ確保して対応するようにした。

#### 2009 12/12 (Sat)
* 変数の内容のツリー形式文字列を、関数ではなく CVarinfoTree クラスが生成するようにした。
* マクロ USE_DEFAULT_ARG がないために、STRUCTPRM の大きさがビルド時と違っていたバグを修正した。
* modinst のメンバを拡張表示するようにした。
* 変数の内容は CVarinfoText クラスを用いて生成するようにした。
* メモリダンプの表示形式を変更した。
  * 1行に 16 バイト分表示するなど、ddw に似せた。
* 変数データテキストを、項目をＷクリックしたり、リターンキー ( [Enter] ) を押したりしても更新するようにした。
* logmes されても変数ツリーを構築し直さないようにした。

#### 2009 12/10 (Thu)
* vector ツリーで、「=」の左辺に「変数名[a][b]...[n]」ではなく「[n]」とだけ表示するようにした。
  * `.vartype` で型名を表示するようにした。
* vector が空の時の表記を変更した。

#### 2009 12/09 (Wed)
* HSP3DEBUG::dbg_toString() を追加した。
* 変数の内容 (varinf) を、knowbug が処理して表示するようにした。
  * つまり、HSP3DEBUG::dbg_getvarinf() を呼ばないようになった。
* vectorをツリー形式の文字列で表示するようにした。

#### 2009 12/07 (Mon)
* 別フォルダに移動し、knowbug に改名した。
* 静的変数リストを、木構造の CVarTree クラスで管理するようにした。
* 「変数」タブのチェックボックスを削除し、「配列」「静的ローカル」「メモリダンプ」などを常に行うようにした。
* 変数リストをツリービューで表示するようにした。

#### 2009 12/06 (Sun)
* 開発開始。
* EditControl のフォントを「MS UI Gothic」から「ＭＳ ゴシック」に変更した。
* タブのページを、限界まで広く使うようにした。
* 初期状態で、「配列」「静的ローカル (旧 : モジュール)」「メモリダンプ」のチェックをついた状態にした。
* 「ソート」ボタンを削除し、常にソートするようにした。
* 変数リストをリストボックスに取得するに際し、一旦 CVarnameList クラスに変数名を追加し、それの反復子を用いるようにした。
  * 属するモジュールごとに変数を分別するため。
* 静的変数リストは、始めに1回だけ取得するようにした。
  * 途中で変わるわけがないため。
* 変数がないときに、無効な iterator を脱参照してしまっていたバグを修整した。
